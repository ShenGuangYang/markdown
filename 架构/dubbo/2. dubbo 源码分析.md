# spi 机制演示

## java spi 机制

demo：

```java
public interface Robot {
    void sayHello();
}
```

```java
public class ARobot implements Robot {
    @Override
    public void sayHello() {
        System.out.println("hello a robot");
    }
}

public class BRobot implements Robot {
    @Override
    public void sayHello() {
        System.out.println("hello b robot");
    }
}
```

​		在`resources`目录下新建`META-INF/services`目录，并新建`Robot`类名全路径文件(com.study.Robot)，在该文件内增加如下内容

```
com.study.ARobot
com.study.BRobot
```



测试

```java
public static void main(String[] args) {
    ServiceLoader<Robot> serviceLoader = ServiceLoader.load(Robot.class);
    serviceLoader.forEach(Robot::sayHello);
}
```





## dubbo spi 机制



​		先引入dubbo的相关jar包，在上述代码中的`Robot`代码中新增类注解`@SPI`，并在在`resources`目录下新建`META-INF/dubbo`目录，并新建`Robot`类名全路径文件(com.study.Robot)，在该文件内增加如下内容

```
a=com.example.dubbo.demo.spi.ARobot
b=com.example.dubbo.demo.spi.BRobot
```



测试

```java
 public static void main(String[] args) {

     ExtensionLoader<Robot> extensionLoader = ExtensionLoader.getExtensionLoader(Robot.class);
     Robot a = extensionLoader.getExtension("a");
     a.sayHello();
     Robot b = extensionLoader.getExtension("b");
     b.sayHello();
 }
```





# dubbo spi 机制原理分析

[dubbo 官网分析](http://dubbo.apache.org/zh-cn/docs/source_code_guide/dubbo-spi.html)



# dubbo 自适应拓展机制



[自适应拓展机制](http://dubbo.apache.org/zh-cn/docs/source_code_guide/adaptive-extension.html)







